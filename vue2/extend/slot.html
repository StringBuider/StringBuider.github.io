<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>slot | å°å¼ çš„å…±äº«æ–‡æ¡£</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="ğŸ¤”ä½ æœ‰ä»€ä¹ˆæƒ³è¯´ï¼Ÿå†™è¿›æ¥å§ï¼ğŸ˜">
    
    <link rel="preload" href="./assets/css/0.styles.a246c231.css" as="style"><link rel="preload" href="./assets/js/app.c50cae2e.js" as="script"><link rel="preload" href="./assets/js/4.08095b6d.js" as="script"><link rel="preload" href="./assets/js/52.e0cc02e1.js" as="script"><link rel="prefetch" href="./assets/js/10.ed3e9f33.js"><link rel="prefetch" href="./assets/js/11.6495f8ce.js"><link rel="prefetch" href="./assets/js/12.e15e40c1.js"><link rel="prefetch" href="./assets/js/13.33a2b3c3.js"><link rel="prefetch" href="./assets/js/14.5d605ae8.js"><link rel="prefetch" href="./assets/js/15.b5e3a30f.js"><link rel="prefetch" href="./assets/js/16.32bee43d.js"><link rel="prefetch" href="./assets/js/17.67f7f069.js"><link rel="prefetch" href="./assets/js/18.af04d610.js"><link rel="prefetch" href="./assets/js/19.730c3139.js"><link rel="prefetch" href="./assets/js/2.7fc48c46.js"><link rel="prefetch" href="./assets/js/20.1c4fbbf9.js"><link rel="prefetch" href="./assets/js/21.67119724.js"><link rel="prefetch" href="./assets/js/22.c2076f14.js"><link rel="prefetch" href="./assets/js/23.f25b155f.js"><link rel="prefetch" href="./assets/js/24.c8791672.js"><link rel="prefetch" href="./assets/js/25.af22f7f1.js"><link rel="prefetch" href="./assets/js/26.777a42b7.js"><link rel="prefetch" href="./assets/js/27.25c6658f.js"><link rel="prefetch" href="./assets/js/28.4c66a1fb.js"><link rel="prefetch" href="./assets/js/29.45d218cd.js"><link rel="prefetch" href="./assets/js/3.fb9770df.js"><link rel="prefetch" href="./assets/js/30.2cfa5f3d.js"><link rel="prefetch" href="./assets/js/31.9a7819c6.js"><link rel="prefetch" href="./assets/js/32.6b80cecb.js"><link rel="prefetch" href="./assets/js/33.e00e1922.js"><link rel="prefetch" href="./assets/js/34.445fb4ff.js"><link rel="prefetch" href="./assets/js/35.2f86d553.js"><link rel="prefetch" href="./assets/js/36.7e8dc342.js"><link rel="prefetch" href="./assets/js/37.827964ca.js"><link rel="prefetch" href="./assets/js/38.306618b3.js"><link rel="prefetch" href="./assets/js/39.96d345b4.js"><link rel="prefetch" href="./assets/js/40.5327dcb2.js"><link rel="prefetch" href="./assets/js/41.29160afa.js"><link rel="prefetch" href="./assets/js/42.3ec42885.js"><link rel="prefetch" href="./assets/js/43.db7bc261.js"><link rel="prefetch" href="./assets/js/44.60eae751.js"><link rel="prefetch" href="./assets/js/45.15437d11.js"><link rel="prefetch" href="./assets/js/46.55a5744d.js"><link rel="prefetch" href="./assets/js/47.e8e54de1.js"><link rel="prefetch" href="./assets/js/48.97e52f5e.js"><link rel="prefetch" href="./assets/js/49.c58d43a4.js"><link rel="prefetch" href="./assets/js/5.4c884eba.js"><link rel="prefetch" href="./assets/js/50.a93fcdb0.js"><link rel="prefetch" href="./assets/js/51.c43da0f8.js"><link rel="prefetch" href="./assets/js/53.95f0f53a.js"><link rel="prefetch" href="./assets/js/54.c4c47eaf.js"><link rel="prefetch" href="./assets/js/55.b37c9037.js"><link rel="prefetch" href="./assets/js/56.3d8ed2b4.js"><link rel="prefetch" href="./assets/js/57.bd65c07b.js"><link rel="prefetch" href="./assets/js/58.134b9e82.js"><link rel="prefetch" href="./assets/js/59.24c871f7.js"><link rel="prefetch" href="./assets/js/6.4e374fac.js"><link rel="prefetch" href="./assets/js/60.b75523ad.js"><link rel="prefetch" href="./assets/js/61.484be178.js"><link rel="prefetch" href="./assets/js/62.180c4d5d.js"><link rel="prefetch" href="./assets/js/63.c4c8b737.js"><link rel="prefetch" href="./assets/js/64.3921bee2.js"><link rel="prefetch" href="./assets/js/65.8c31bc75.js"><link rel="prefetch" href="./assets/js/66.a5410547.js"><link rel="prefetch" href="./assets/js/67.32e09623.js"><link rel="prefetch" href="./assets/js/68.4d59d330.js"><link rel="prefetch" href="./assets/js/69.fffc95ef.js"><link rel="prefetch" href="./assets/js/7.ef54b1c1.js"><link rel="prefetch" href="./assets/js/70.72980d01.js"><link rel="prefetch" href="./assets/js/71.fbafa4c6.js"><link rel="prefetch" href="./assets/js/72.59e84ead.js"><link rel="prefetch" href="./assets/js/73.62c6073a.js"><link rel="prefetch" href="./assets/js/74.098849aa.js"><link rel="prefetch" href="./assets/js/75.c4126dcd.js"><link rel="prefetch" href="./assets/js/76.288ce637.js"><link rel="prefetch" href="./assets/js/77.405cc8e4.js"><link rel="prefetch" href="./assets/js/78.f092ec42.js"><link rel="prefetch" href="./assets/js/79.5965beb6.js"><link rel="prefetch" href="./assets/js/8.1e8a08c7.js"><link rel="prefetch" href="./assets/js/80.b06d3623.js"><link rel="prefetch" href="./assets/js/81.7e1c12fd.js"><link rel="prefetch" href="./assets/js/82.23093c7e.js"><link rel="prefetch" href="./assets/js/9.07409efc.js">
    <link rel="stylesheet" href="./assets/css/0.styles.a246c231.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/./" class="home-link router-link-active"><!----> <span class="site-name">å°å¼ çš„å…±äº«æ–‡æ¡£</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/./" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æŒ‡å—" class="dropdown-title"><span class="title">æŒ‡å—</span> <span class="arrow down"></span></button> <button type="button" aria-label="æŒ‡å—" class="mobile-dropdown-title"><span class="title">æŒ‡å—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./guide/getting-started.html" class="nav-link">
  å‚ä¸å†™ä½œ
</a></li><li class="dropdown-item"><!----> <a href="/./guide/micro-frontends.html" class="nav-link">
  å¾®å‰ç«¯
</a></li><li class="dropdown-item"><!----> <a href="/./guide/micro-frontends-faq.html" class="nav-link">
  å¾®å‰ç«¯FAQ
</a></li><li class="dropdown-item"><!----> <a href="/./guide/git-flow.html" class="nav-link">
  å·¥ä½œæµ
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="è§„èŒƒ" class="dropdown-title"><span class="title">è§„èŒƒ</span> <span class="arrow down"></span></button> <button type="button" aria-label="è§„èŒƒ" class="mobile-dropdown-title"><span class="title">è§„èŒƒ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./standard/micro-frontends-route.html" class="nav-link">
  å¾®å‰ç«¯-è·¯ç”±è§„èŒƒ
</a></li><li class="dropdown-item"><!----> <a href="/./standard/micro-frontends-version-control.html" class="nav-link">
  å¾®å‰ç«¯-ç‰ˆæœ¬ç®¡ç†
</a></li><li class="dropdown-item"><!----> <a href="/./standard/typescript.html" class="nav-link">
  TypeScriptè§„èŒƒ
</a></li><li class="dropdown-item"><!----> <a href="/./standard/code-version-control.html" class="nav-link">
  ä»£ç åˆ†æ”¯ç®¡ç†
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="tips" class="dropdown-title"><span class="title">tips</span> <span class="arrow down"></span></button> <button type="button" aria-label="tips" class="mobile-dropdown-title"><span class="title">tips</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./tips/url-mode.html" class="nav-link">
  urlæ¨¡å¼
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ’ä»¶" class="dropdown-title"><span class="title">æ’ä»¶</span> <span class="arrow down"></span></button> <button type="button" aria-label="æ’ä»¶" class="mobile-dropdown-title"><span class="title">æ’ä»¶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./plugins/plugin.html" class="nav-link">
  æ’ä»¶åˆ†äº«
</a></li></ul></div></div><div class="nav-item"><a href="/./vue2/prepare/" class="nav-link">
  vue2.x
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="vue3.x" class="dropdown-title"><span class="title">vue3.x</span> <span class="arrow down"></span></button> <button type="button" aria-label="vue3.x" class="mobile-dropdown-title"><span class="title">vue3.x</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./vue3/essence-of-comp.html" class="nav-link">
  ç»„ä»¶çš„æœ¬è´¨
</a></li><li class="dropdown-item"><!----> <a href="/./vue3/vnode.html" class="nav-link">
  æŠŠVNodeè§£å‰–ä¸€ä¸‹
</a></li><li class="dropdown-item"><!----> <a href="/./vue3/h.html" class="nav-link">
  è¾…åŠ©åˆ›å»º VNode çš„ h å‡½æ•°
</a></li><li class="dropdown-item"><!----> <a href="/./vue3/observer.html" class="nav-link">
  å“åº”å¼åŸç†
</a></li><li class="dropdown-item"><!----> <a href="/./vue3/renderer.html" class="nav-link">
  æ¸²æŸ“å™¨ä¹‹æŒ‚è½½
</a></li><li class="dropdown-item"><!----> <a href="/./vue3/renderer-patch.html" class="nav-link">
  æ¸²æŸ“å™¨ä¹‹patch
</a></li><li class="dropdown-item"><!----> <a href="/./vue3/renderer-diff.html" class="nav-link">
  æ¸²æŸ“å™¨çš„æ ¸å¿ƒ Diff ç®—æ³•
</a></li><li class="dropdown-item"><!----> <a href="/./vue3/renderer-advanced.html" class="nav-link">
  è‡ªå®šä¹‰æ¸²æŸ“å™¨
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å‰ç«¯å…«è‚¡æ–‡" class="dropdown-title"><span class="title">å‰ç«¯å…«è‚¡æ–‡</span> <span class="arrow down"></span></button> <button type="button" aria-label="å‰ç«¯å…«è‚¡æ–‡" class="mobile-dropdown-title"><span class="title">å‰ç«¯å…«è‚¡æ–‡</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./basic/basic.html" class="nav-link">
  å…«è‚¡æ–‡
</a></li><li class="dropdown-item"><!----> <a href="/./basic/arithmetic.html" class="nav-link">
  ç®—æ³•
</a></li><li class="dropdown-item"><!----> <a href="/./basic/desinmode.html" class="nav-link">
  è®¾è®¡æ¨¡å¼
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="é¢è¯•ç»éªŒ" class="dropdown-title"><span class="title">é¢è¯•ç»éªŒ</span> <span class="arrow down"></span></button> <button type="button" aria-label="é¢è¯•ç»éªŒ" class="mobile-dropdown-title"><span class="title">é¢è¯•ç»éªŒ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./interview/interview.html" class="nav-link">
  é¢è¯•ç»éªŒ
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/./" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æŒ‡å—" class="dropdown-title"><span class="title">æŒ‡å—</span> <span class="arrow down"></span></button> <button type="button" aria-label="æŒ‡å—" class="mobile-dropdown-title"><span class="title">æŒ‡å—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./guide/getting-started.html" class="nav-link">
  å‚ä¸å†™ä½œ
</a></li><li class="dropdown-item"><!----> <a href="/./guide/micro-frontends.html" class="nav-link">
  å¾®å‰ç«¯
</a></li><li class="dropdown-item"><!----> <a href="/./guide/micro-frontends-faq.html" class="nav-link">
  å¾®å‰ç«¯FAQ
</a></li><li class="dropdown-item"><!----> <a href="/./guide/git-flow.html" class="nav-link">
  å·¥ä½œæµ
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="è§„èŒƒ" class="dropdown-title"><span class="title">è§„èŒƒ</span> <span class="arrow down"></span></button> <button type="button" aria-label="è§„èŒƒ" class="mobile-dropdown-title"><span class="title">è§„èŒƒ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./standard/micro-frontends-route.html" class="nav-link">
  å¾®å‰ç«¯-è·¯ç”±è§„èŒƒ
</a></li><li class="dropdown-item"><!----> <a href="/./standard/micro-frontends-version-control.html" class="nav-link">
  å¾®å‰ç«¯-ç‰ˆæœ¬ç®¡ç†
</a></li><li class="dropdown-item"><!----> <a href="/./standard/typescript.html" class="nav-link">
  TypeScriptè§„èŒƒ
</a></li><li class="dropdown-item"><!----> <a href="/./standard/code-version-control.html" class="nav-link">
  ä»£ç åˆ†æ”¯ç®¡ç†
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="tips" class="dropdown-title"><span class="title">tips</span> <span class="arrow down"></span></button> <button type="button" aria-label="tips" class="mobile-dropdown-title"><span class="title">tips</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./tips/url-mode.html" class="nav-link">
  urlæ¨¡å¼
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ’ä»¶" class="dropdown-title"><span class="title">æ’ä»¶</span> <span class="arrow down"></span></button> <button type="button" aria-label="æ’ä»¶" class="mobile-dropdown-title"><span class="title">æ’ä»¶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./plugins/plugin.html" class="nav-link">
  æ’ä»¶åˆ†äº«
</a></li></ul></div></div><div class="nav-item"><a href="/./vue2/prepare/" class="nav-link">
  vue2.x
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="vue3.x" class="dropdown-title"><span class="title">vue3.x</span> <span class="arrow down"></span></button> <button type="button" aria-label="vue3.x" class="mobile-dropdown-title"><span class="title">vue3.x</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./vue3/essence-of-comp.html" class="nav-link">
  ç»„ä»¶çš„æœ¬è´¨
</a></li><li class="dropdown-item"><!----> <a href="/./vue3/vnode.html" class="nav-link">
  æŠŠVNodeè§£å‰–ä¸€ä¸‹
</a></li><li class="dropdown-item"><!----> <a href="/./vue3/h.html" class="nav-link">
  è¾…åŠ©åˆ›å»º VNode çš„ h å‡½æ•°
</a></li><li class="dropdown-item"><!----> <a href="/./vue3/observer.html" class="nav-link">
  å“åº”å¼åŸç†
</a></li><li class="dropdown-item"><!----> <a href="/./vue3/renderer.html" class="nav-link">
  æ¸²æŸ“å™¨ä¹‹æŒ‚è½½
</a></li><li class="dropdown-item"><!----> <a href="/./vue3/renderer-patch.html" class="nav-link">
  æ¸²æŸ“å™¨ä¹‹patch
</a></li><li class="dropdown-item"><!----> <a href="/./vue3/renderer-diff.html" class="nav-link">
  æ¸²æŸ“å™¨çš„æ ¸å¿ƒ Diff ç®—æ³•
</a></li><li class="dropdown-item"><!----> <a href="/./vue3/renderer-advanced.html" class="nav-link">
  è‡ªå®šä¹‰æ¸²æŸ“å™¨
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å‰ç«¯å…«è‚¡æ–‡" class="dropdown-title"><span class="title">å‰ç«¯å…«è‚¡æ–‡</span> <span class="arrow down"></span></button> <button type="button" aria-label="å‰ç«¯å…«è‚¡æ–‡" class="mobile-dropdown-title"><span class="title">å‰ç«¯å…«è‚¡æ–‡</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./basic/basic.html" class="nav-link">
  å…«è‚¡æ–‡
</a></li><li class="dropdown-item"><!----> <a href="/./basic/arithmetic.html" class="nav-link">
  ç®—æ³•
</a></li><li class="dropdown-item"><!----> <a href="/./basic/desinmode.html" class="nav-link">
  è®¾è®¡æ¨¡å¼
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="é¢è¯•ç»éªŒ" class="dropdown-title"><span class="title">é¢è¯•ç»éªŒ</span> <span class="arrow down"></span></button> <button type="button" aria-label="é¢è¯•ç»éªŒ" class="mobile-dropdown-title"><span class="title">é¢è¯•ç»éªŒ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./interview/interview.html" class="nav-link">
  é¢è¯•ç»éªŒ
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>å‡†å¤‡å·¥ä½œ</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/./vue2/prepare/" class="sidebar-link">Introduction</a></li><li><a href="/./vue2/prepare/flow.html" class="sidebar-link">è®¤è¯† Flow</a></li><li><a href="/./vue2/prepare/directory.html" class="sidebar-link">Vue.js æºç ç›®å½•è®¾è®¡</a></li><li><a href="/./vue2/prepare/build.html" class="sidebar-link">Vue.js æºç æ„å»º</a></li><li><a href="/./vue2/prepare/entrance.html" class="sidebar-link">ä»å…¥å£å¼€å§‹</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>æ•°æ®é©±åŠ¨</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/./vue2/data-driven/" class="sidebar-link">Introduction</a></li><li><a href="/./vue2/data-driven/new-vue.html" class="sidebar-link">new Vue å‘ç”Ÿäº†ä»€ä¹ˆ</a></li><li><a href="/./vue2/data-driven/mounted.html" class="sidebar-link">Vue å®ä¾‹æŒ‚è½½çš„å®ç°</a></li><li><a href="/./vue2/data-driven/render.html" class="sidebar-link">render</a></li><li><a href="/./vue2/data-driven/virtual-dom.html" class="sidebar-link">Virtual DOM</a></li><li><a href="/./vue2/data-driven/create-element.html" class="sidebar-link">createElement</a></li><li><a href="/./vue2/data-driven/update.html" class="sidebar-link">update</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ç»„ä»¶åŒ–</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/./vue2/components/" class="sidebar-link">Introduction</a></li><li><a href="/./vue2/components/create-component.html" class="sidebar-link">createComponent</a></li><li><a href="/./vue2/components/patch.html" class="sidebar-link">patch</a></li><li><a href="/./vue2/components/merge-option.html" class="sidebar-link">åˆå¹¶é…ç½®</a></li><li><a href="/./vue2/components/lifecycle.html" class="sidebar-link">ç”Ÿå‘½å‘¨æœŸ</a></li><li><a href="/./vue2/components/component-register.html" class="sidebar-link">ç»„ä»¶æ³¨å†Œ</a></li><li><a href="/./vue2/components/async-component.html" class="sidebar-link">å¼‚æ­¥ç»„ä»¶</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>æ·±å…¥å“åº”å¼åŸç†</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/./vue2/reactive/" class="sidebar-link">Introduction</a></li><li><a href="/./vue2/reactive/reactive-object.html" class="sidebar-link">å“åº”å¼å¯¹è±¡</a></li><li><a href="/./vue2/reactive/getters.html" class="sidebar-link">ä¾èµ–æ”¶é›†</a></li><li><a href="/./vue2/reactive/setters.html" class="sidebar-link">æ´¾å‘æ›´æ–°</a></li><li><a href="/./vue2/reactive/next-tick.html" class="sidebar-link">nextTick</a></li><li><a href="/./vue2/reactive/questions.html" class="sidebar-link">æ£€æµ‹å˜åŒ–çš„æ³¨æ„äº‹é¡¹</a></li><li><a href="/./vue2/reactive/computed-watcher.html" class="sidebar-link">è®¡ç®—å±æ€§ VS ä¾¦å¬å±æ€§</a></li><li><a href="/./vue2/reactive/component-update.html" class="sidebar-link">ç»„ä»¶æ›´æ–°</a></li><li><a href="/./vue2/reactive/props.html" class="sidebar-link">Props (v2.6.11)</a></li><li><a href="/./vue2/reactive/summary.html" class="sidebar-link">åŸç†å›¾</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ç¼–è¯‘</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/./vue2/compile/" class="sidebar-link">Introduction</a></li><li><a href="/./vue2/compile/entrance.html" class="sidebar-link">ç¼–è¯‘å…¥å£</a></li><li><a href="/./vue2/compile/parse.html" class="sidebar-link">parse</a></li><li><a href="/./vue2/compile/optimize.html" class="sidebar-link">optimize</a></li><li><a href="/./vue2/compile/codegen.html" class="sidebar-link">codegen</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>æ‰©å±•</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/./vue2/extend/" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="/./vue2/extend/event.html" class="sidebar-link">event</a></li><li><a href="/./vue2/extend/v-model.html" class="sidebar-link">v-model</a></li><li><a href="/./vue2/extend/slot.html" aria-current="page" class="active sidebar-link">slot</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/./vue2/extend/slot.html#æ™®é€šæ’æ§½" class="sidebar-link">æ™®é€šæ’æ§½</a></li><li class="sidebar-sub-header"><a href="/./vue2/extend/slot.html#ç¼–è¯‘" class="sidebar-link">ç¼–è¯‘</a></li><li class="sidebar-sub-header"><a href="/./vue2/extend/slot.html#ä½œç”¨åŸŸæ’æ§½" class="sidebar-link">ä½œç”¨åŸŸæ’æ§½</a></li><li class="sidebar-sub-header"><a href="/./vue2/extend/slot.html#æ€»ç»“" class="sidebar-link">æ€»ç»“</a></li></ul></li><li><a href="/./vue2/extend/keep-alive.html" class="sidebar-link">keep-alive</a></li><li><a href="/./vue2/extend/tansition.html" class="sidebar-link">transition</a></li><li><a href="/./vue2/extend/tansition-group.html" class="sidebar-link">transition-group</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vue Router</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/./vue2/vue-router/" class="sidebar-link">Introduction</a></li><li><a href="/./vue2/vue-router/install.html" class="sidebar-link">è·¯ç”±æ³¨å†Œ</a></li><li><a href="/./vue2/vue-router/router.html" class="sidebar-link">VueRouter å¯¹è±¡</a></li><li><a href="/./vue2/vue-router/matcher.html" class="sidebar-link">matcher</a></li><li><a href="/./vue2/vue-router/transition-to.html" class="sidebar-link">è·¯å¾„åˆ‡æ¢</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vuex</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/./vue2/vuex/" class="sidebar-link">Introduction</a></li><li><a href="/./vue2/vuex/init.html" class="sidebar-link">Vuex åˆå§‹åŒ–</a></li><li><a href="/./vue2/vuex/api.html" class="sidebar-link">API</a></li><li><a href="/./vue2/vuex/plugin.html" class="sidebar-link">æ’ä»¶</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="slot"><a href="#slot" class="header-anchor">#</a> slot</h1> <p>Vue çš„ç»„ä»¶æä¾›äº†ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„ç‰¹æ€§ â€”â€” <code>slot</code> æ’æ§½ï¼Œå®ƒè®©ç»„ä»¶çš„å®ç°å˜çš„æ›´åŠ çµæ´»ã€‚æˆ‘ä»¬å¹³æ—¶åœ¨å¼€å‘ç»„ä»¶åº“çš„æ—¶å€™ï¼Œä¸ºäº†è®©ç»„ä»¶æ›´åŠ çµæ´»å¯å®šåˆ¶ï¼Œç»å¸¸ç”¨æ’æ§½çš„æ–¹å¼è®©ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰å†…å®¹ã€‚æ’æ§½åˆ†ä¸ºæ™®é€šæ’æ§½å’Œä½œç”¨åŸŸæ’æ§½ï¼Œå®ƒä»¬å¯ä»¥è§£å†³ä¸åŒçš„åœºæ™¯ï¼Œä½†å®ƒæ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Œä¸‹é¢æˆ‘ä»¬å°±ä»æºç çš„è§’åº¦æ¥åˆ†ææ’æ§½çš„å®ç°åŸç†ã€‚</p> <h2 id="æ™®é€šæ’æ§½"><a href="#æ™®é€šæ’æ§½" class="header-anchor">#</a> æ™®é€šæ’æ§½</h2> <p>ä¸ºäº†æ›´åŠ ç›´è§‚ï¼Œæˆ‘ä»¬è¿˜æ˜¯é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥åˆ†ææ’æ§½çš„å®ç°ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> AppLayout <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'&lt;div class=&quot;container&quot;&gt;'</span> <span class="token operator">+</span>
  <span class="token string">'&lt;header&gt;&lt;slot name=&quot;header&quot;&gt;&lt;/slot&gt;&lt;/header&gt;'</span> <span class="token operator">+</span>
  <span class="token string">'&lt;main&gt;&lt;slot&gt;é»˜è®¤å†…å®¹&lt;/slot&gt;&lt;/main&gt;'</span> <span class="token operator">+</span>
  <span class="token string">'&lt;footer&gt;&lt;slot name=&quot;footer&quot;&gt;&lt;/slot&gt;&lt;/footer&gt;'</span> <span class="token operator">+</span>
  <span class="token string">'&lt;/div&gt;'</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'&lt;div&gt;'</span> <span class="token operator">+</span>
  <span class="token string">'&lt;app-layout&gt;'</span> <span class="token operator">+</span>
  <span class="token string">'&lt;h1 slot=&quot;header&quot;&gt;{{title}}&lt;/h1&gt;'</span> <span class="token operator">+</span>
  <span class="token string">'&lt;p&gt;{{msg}}&lt;/p&gt;'</span> <span class="token operator">+</span>
  <span class="token string">'&lt;p slot=&quot;footer&quot;&gt;{{desc}}&lt;/p&gt;'</span> <span class="token operator">+</span>
  <span class="token string">'&lt;/app-layout&gt;'</span> <span class="token operator">+</span>
  <span class="token string">'&lt;/div&gt;'</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'æˆ‘æ˜¯æ ‡é¢˜'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">'æˆ‘æ˜¯å†…å®¹'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'å…¶å®ƒä¿¡æ¯'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    AppLayout
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>è¿™é‡Œæˆ‘ä»¬å®šä¹‰äº† <code>AppLayout</code> å­ç»„ä»¶ï¼Œå®ƒå†…éƒ¨å®šä¹‰äº† 3 ä¸ªæ’æ§½ï¼Œ2 ä¸ªä¸ºå…·åæ’æ§½ï¼Œä¸€ä¸ª <code>name</code> ä¸º <code>header</code>ï¼Œä¸€ä¸ª <code>name</code> ä¸º <code>footer</code>ï¼Œè¿˜æœ‰ä¸€ä¸ªæ²¡æœ‰å®šä¹‰ <code>name</code> çš„æ˜¯é»˜è®¤æ’æ§½ã€‚ <code>&lt;slot&gt;</code> å’Œ <code>&lt;/slot&gt;</code> ä¹‹å‰å¡«å†™çš„å†…å®¹ä¸ºé»˜è®¤å†…å®¹ã€‚æˆ‘ä»¬çš„çˆ¶ç»„ä»¶æ³¨å†Œå’Œå¼•ç”¨äº† <code>AppLayout</code> çš„ç»„ä»¶ï¼Œå¹¶åœ¨ç»„ä»¶å†…éƒ¨å®šä¹‰äº†ä¸€äº›å…ƒç´ ï¼Œç”¨æ¥æ›¿æ¢æ’æ§½ï¼Œé‚£ä¹ˆå®ƒæœ€ç»ˆç”Ÿæˆçš„ DOM å¦‚ä¸‹ï¼š</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>æˆ‘æ˜¯æ ‡é¢˜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>æˆ‘æ˜¯å†…å®¹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>å…¶å®ƒä¿¡æ¯<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>footer</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="ç¼–è¯‘"><a href="#ç¼–è¯‘" class="header-anchor">#</a> ç¼–è¯‘</h2> <p>è¿˜æ˜¯å…ˆä»ç¼–è¯‘è¯´èµ·ï¼Œæˆ‘ä»¬çŸ¥é“ç¼–è¯‘æ˜¯å‘ç”Ÿåœ¨è°ƒç”¨ <code>vm.$mount</code> çš„æ—¶å€™ï¼Œæ‰€ä»¥ç¼–è¯‘çš„é¡ºåºæ˜¯å…ˆç¼–è¯‘çˆ¶ç»„ä»¶ï¼Œå†ç¼–è¯‘å­ç»„ä»¶ã€‚</p> <p>é¦–å…ˆç¼–è¯‘çˆ¶ç»„ä»¶ï¼Œåœ¨ <code>parse</code> é˜¶æ®µï¼Œä¼šæ‰§è¡Œ <code>processSlot</code> å¤„ç† <code>slot</code>ï¼Œå®ƒçš„å®šä¹‰åœ¨ <code>src/compiler/parser/index.js</code> ä¸­ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">processSlot</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>tag <span class="token operator">===</span> <span class="token string">'slot'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    el<span class="token punctuation">.</span>slotName <span class="token operator">=</span> <span class="token function">getBindingAttr</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span> <span class="token operator">&amp;&amp;</span> el<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">warn</span><span class="token punctuation">(</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">\`key\` does not work on &lt;slot&gt; because slots are abstract outlets </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">and can possibly expand into multiple elements. </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Use the key on a wrapping element instead.</span><span class="token template-punctuation string">`</span></span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> slotScope
    <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>tag <span class="token operator">===</span> <span class="token string">'template'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      slotScope <span class="token operator">=</span> <span class="token function">getAndRemoveAttr</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token string">'scope'</span><span class="token punctuation">)</span>
      <span class="token comment">/* istanbul ignore if */</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span> <span class="token operator">&amp;&amp;</span> slotScope<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">warn</span><span class="token punctuation">(</span>
          <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">the &quot;scope&quot; attribute for scoped slots have been deprecated and </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
          <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">replaced by &quot;slot-scope&quot; since 2.5. The new &quot;slot-scope&quot; attribute </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
          <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">can also be used on plain elements in addition to &lt;template&gt; to </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
          <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">denote scoped slots.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
          <span class="token boolean">true</span>
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      el<span class="token punctuation">.</span>slotScope <span class="token operator">=</span> slotScope <span class="token operator">||</span> <span class="token function">getAndRemoveAttr</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token string">'slot-scope'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>slotScope <span class="token operator">=</span> <span class="token function">getAndRemoveAttr</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token string">'slot-scope'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">/* istanbul ignore if */</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span> <span class="token operator">&amp;&amp;</span> el<span class="token punctuation">.</span>attrsMap<span class="token punctuation">[</span><span class="token string">'v-for'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">warn</span><span class="token punctuation">(</span>
          <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Ambiguous combined usage of slot-scope and v-for on &lt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>el<span class="token punctuation">.</span>tag<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&gt; </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
          <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">(v-for takes higher priority). Use a wrapper &lt;template&gt; for the </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
          <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">scoped slot to make it clearer.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
          <span class="token boolean">true</span>
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      el<span class="token punctuation">.</span>slotScope <span class="token operator">=</span> slotScope
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> slotTarget <span class="token operator">=</span> <span class="token function">getBindingAttr</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token string">'slot'</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>slotTarget<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      el<span class="token punctuation">.</span>slotTarget <span class="token operator">=</span> slotTarget <span class="token operator">===</span> <span class="token string">'&quot;&quot;'</span> <span class="token operator">?</span> <span class="token string">'&quot;default&quot;'</span> <span class="token operator">:</span> slotTarget
      <span class="token comment">// preserve slot as an attribute for native shadow DOM compat</span>
      <span class="token comment">// only for non-scoped slots.</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>tag <span class="token operator">!==</span> <span class="token string">'template'</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>el<span class="token punctuation">.</span>slotScope<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">addAttr</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token string">'slot'</span><span class="token punctuation">,</span> slotTarget<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å½“è§£æåˆ°æ ‡ç­¾ä¸Šæœ‰ <code>slot</code> å±æ€§çš„æ—¶å€™ï¼Œä¼šç»™å¯¹åº”çš„ AST
å…ƒç´ èŠ‚ç‚¹æ·»åŠ  <code>slotTarget</code> å±æ€§ï¼Œç„¶ååœ¨ <code>codegen</code> é˜¶æ®µï¼Œåœ¨ <code>genData</code> ä¸­ä¼šå¤„ç† <code>slotTarget</code>ï¼Œç›¸å…³ä»£ç åœ¨ <code>src/compiler/codegen/index.js</code> ä¸­ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>slotTarget <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>el<span class="token punctuation">.</span>slotScope<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  data <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">slot:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>el<span class="token punctuation">.</span>slotTarget<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¼šç»™ <code>data</code> æ·»åŠ ä¸€ä¸ª <code>slot</code> å±æ€§ï¼Œå¹¶æŒ‡å‘ <code>slotTarget</code>ï¼Œä¹‹åä¼šç”¨åˆ°ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œçˆ¶ç»„ä»¶æœ€ç»ˆç”Ÿæˆçš„ä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">with</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">_c</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token function">_c</span><span class="token punctuation">(</span><span class="token string">'app-layout'</span><span class="token punctuation">,</span>
      <span class="token punctuation">[</span><span class="token function">_c</span><span class="token punctuation">(</span><span class="token string">'h1'</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">attrs</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string-property property">&quot;slot&quot;</span><span class="token operator">:</span><span class="token string">&quot;header&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token literal-property property">slot</span><span class="token operator">:</span><span class="token string">&quot;header&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
         <span class="token punctuation">[</span><span class="token function">_v</span><span class="token punctuation">(</span><span class="token function">_s</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token function">_c</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token function">_v</span><span class="token punctuation">(</span><span class="token function">_s</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token function">_c</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">attrs</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string-property property">&quot;slot&quot;</span><span class="token operator">:</span><span class="token string">&quot;footer&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token literal-property property">slot</span><span class="token operator">:</span><span class="token string">&quot;footer&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
         <span class="token punctuation">[</span><span class="token function">_v</span><span class="token punctuation">(</span><span class="token function">_s</span><span class="token punctuation">(</span>desc<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
         <span class="token punctuation">)</span>
       <span class="token punctuation">]</span><span class="token punctuation">)</span>
     <span class="token punctuation">]</span><span class="token punctuation">,</span>
   <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
</code></pre></div><p>æ¥ä¸‹æ¥ç¼–è¯‘å­ç»„ä»¶ï¼ŒåŒæ ·åœ¨ <code>parser</code> é˜¶æ®µä¼šæ‰§è¡Œ <code>processSlot</code> å¤„ç†å‡½æ•°ï¼Œå®ƒçš„å®šä¹‰åœ¨ <code>src/compiler/parser/index.js</code> ä¸­ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">processSlot</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>tag <span class="token operator">===</span> <span class="token string">'slot'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    el<span class="token punctuation">.</span>slotName <span class="token operator">=</span> <span class="token function">getBindingAttr</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å½“é‡åˆ° <code>slot</code> æ ‡ç­¾çš„æ—¶å€™ä¼šç»™å¯¹åº”çš„ AST å…ƒç´ èŠ‚ç‚¹æ·»åŠ  <code>slotName</code> å±æ€§ï¼Œç„¶ååœ¨ <code>codegen</code> é˜¶æ®µï¼Œä¼šåˆ¤æ–­å¦‚æœå½“å‰ AST å…ƒç´ èŠ‚ç‚¹æ˜¯ <code>slot</code> æ ‡ç­¾ï¼Œåˆ™æ‰§è¡Œ <code>genSlot</code> å‡½æ•°ï¼Œå®ƒçš„å®šä¹‰åœ¨ <code>src/compiler/codegen/index.js</code> ä¸­ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">genSlot</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">el</span><span class="token operator">:</span> ASTElement<span class="token punctuation">,</span> <span class="token literal-property property">state</span><span class="token operator">:</span> CodegenState</span><span class="token punctuation">)</span><span class="token operator">:</span> string <span class="token punctuation">{</span>
  <span class="token keyword">const</span> slotName <span class="token operator">=</span> el<span class="token punctuation">.</span>slotName <span class="token operator">||</span> <span class="token string">'&quot;default&quot;'</span>
  <span class="token keyword">const</span> children <span class="token operator">=</span> <span class="token function">genChildren</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> state<span class="token punctuation">)</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">_t(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>slotName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>children <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>children<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token keyword">const</span> attrs <span class="token operator">=</span> el<span class="token punctuation">.</span>attrs <span class="token operator">&amp;&amp;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">{</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>el<span class="token punctuation">.</span>attrs<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">a</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">camelize</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>a<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">}</span><span class="token template-punctuation string">`</span></span>
  <span class="token keyword">const</span> bind <span class="token operator">=</span> el<span class="token punctuation">.</span>attrsMap<span class="token punctuation">[</span><span class="token string">'v-bind'</span><span class="token punctuation">]</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>attrs <span class="token operator">||</span> bind<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>children<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">,null</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>attrs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>attrs<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>bind<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>attrs <span class="token operator">?</span> <span class="token string">''</span> <span class="token operator">:</span> <span class="token string">',null'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>bind<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> res <span class="token operator">+</span> <span class="token string">')'</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æˆ‘ä»¬å…ˆä¸è€ƒè™‘ <code>slot</code> æ ‡ç­¾ä¸Šæœ‰ <code>attrs</code> ä»¥åŠ <code>v-bind</code> çš„æƒ…å†µï¼Œé‚£ä¹ˆå®ƒç”Ÿæˆçš„ä»£ç å®é™…ä¸Šå°±åªæœ‰ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> slotName <span class="token operator">=</span> el<span class="token punctuation">.</span>slotName <span class="token operator">||</span> <span class="token string">'&quot;default&quot;'</span>
<span class="token keyword">const</span> children <span class="token operator">=</span> <span class="token function">genChildren</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> state<span class="token punctuation">)</span>
<span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">_t(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>slotName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>children <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>children<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
</code></pre></div><p>è¿™é‡Œçš„ <code>slotName</code> ä» AST å…ƒç´ èŠ‚ç‚¹å¯¹åº”çš„å±æ€§ä¸Šå–ï¼Œé»˜è®¤æ˜¯ <code>default</code>ï¼Œè€Œ <code>children</code> å¯¹åº”çš„å°±æ˜¯ <code>slot</code> å¼€å§‹å’Œé—­åˆæ ‡ç­¾åŒ…è£¹çš„å†…å®¹ã€‚æ¥çœ‹ä¸€ä¸‹æˆ‘ä»¬ä¾‹å­çš„å­ç»„ä»¶æœ€ç»ˆç”Ÿæˆçš„ä»£ç ï¼Œå¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">with</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">_c</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    <span class="token literal-property property">staticClass</span><span class="token operator">:</span><span class="token string">&quot;container&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span>
      <span class="token function">_c</span><span class="token punctuation">(</span><span class="token string">'header'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token function">_t</span><span class="token punctuation">(</span><span class="token string">&quot;header&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function">_c</span><span class="token punctuation">(</span><span class="token string">'main'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token function">_t</span><span class="token punctuation">(</span><span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token function">_v</span><span class="token punctuation">(</span><span class="token string">&quot;é»˜è®¤å†…å®¹&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function">_c</span><span class="token punctuation">(</span><span class="token string">'footer'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token function">_t</span><span class="token punctuation">(</span><span class="token string">&quot;footer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
      <span class="token punctuation">]</span>
   <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åœ¨ç¼–è¯‘ç« èŠ‚æˆ‘ä»¬äº†è§£åˆ°ï¼Œ<code>_t</code> å‡½æ•°å¯¹åº”çš„å°±æ˜¯ <code>renderSlot</code> æ–¹æ³•ï¼Œå®ƒçš„å®šä¹‰åœ¨ <code>src/core/instance/render-heplpers/render-slot.js</code> ä¸­ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * Runtime helper for rendering &lt;slot&gt;
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">renderSlot</span> <span class="token punctuation">(</span>
  <span class="token parameter"><span class="token literal-property property">name</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
  <span class="token literal-property property">fallback</span><span class="token operator">:</span> <span class="token operator">?</span>Array<span class="token operator">&lt;</span>VNode<span class="token operator">&gt;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token operator">?</span>Object<span class="token punctuation">,</span>
  <span class="token literal-property property">bindObject</span><span class="token operator">:</span> <span class="token operator">?</span>Object</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token operator">?</span>Array<span class="token operator">&lt;</span>VNode<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> scopedSlotFn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$scopedSlots<span class="token punctuation">[</span>name<span class="token punctuation">]</span>
  <span class="token keyword">let</span> nodes
  <span class="token keyword">if</span> <span class="token punctuation">(</span>scopedSlotFn<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// scoped slot</span>
    props <span class="token operator">=</span> props <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>bindObject<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">isObject</span><span class="token punctuation">(</span>bindObject<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">warn</span><span class="token punctuation">(</span>
          <span class="token string">'slot v-bind without argument expects an Object'</span><span class="token punctuation">,</span>
          <span class="token keyword">this</span>
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      props <span class="token operator">=</span> <span class="token function">extend</span><span class="token punctuation">(</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> bindObject<span class="token punctuation">)</span><span class="token punctuation">,</span> props<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    nodes <span class="token operator">=</span> <span class="token function">scopedSlotFn</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">||</span> fallback
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> slotNodes <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$slots<span class="token punctuation">[</span>name<span class="token punctuation">]</span>
    <span class="token comment">// warn duplicate slot usage</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>slotNodes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span> <span class="token operator">&amp;&amp;</span> slotNodes<span class="token punctuation">.</span>_rendered<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">warn</span><span class="token punctuation">(</span>
          <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Duplicate presence of slot &quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; found in the same render tree </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
          <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">- this will likely cause render errors.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
          <span class="token keyword">this</span>
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      slotNodes<span class="token punctuation">.</span>_rendered <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
    nodes <span class="token operator">=</span> slotNodes <span class="token operator">||</span> fallback
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> target <span class="token operator">=</span> props <span class="token operator">&amp;&amp;</span> props<span class="token punctuation">.</span>slot
  <span class="token keyword">if</span> <span class="token punctuation">(</span>target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$createElement</span><span class="token punctuation">(</span><span class="token string">'template'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">slot</span><span class="token operator">:</span> target <span class="token punctuation">}</span><span class="token punctuation">,</span> nodes<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> nodes
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>render-slot</code> çš„å‚æ•° <code>name</code> ä»£è¡¨æ’æ§½åç§° <code>slotName</code>ï¼Œ<code>fallback</code> ä»£è¡¨æ’æ§½çš„é»˜è®¤å†…å®¹ç”Ÿæˆçš„ <code>vnode</code> æ•°ç»„ã€‚å…ˆå¿½ç•¥ <code>scoped-slot</code>ï¼Œåªçœ‹é»˜è®¤æ’æ§½é€»è¾‘ã€‚å¦‚æœ <code>this.$slot[name]</code> æœ‰å€¼ï¼Œå°±è¿”å›å®ƒå¯¹åº”çš„ <code>vnode</code> æ•°ç»„ï¼Œå¦åˆ™è¿”å› <code>fallback</code>ã€‚é‚£ä¹ˆè¿™ä¸ª <code>this.$slot</code> æ˜¯å“ªé‡Œæ¥çš„å‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“å­ç»„ä»¶çš„ <code>init</code> æ—¶æœºæ˜¯åœ¨çˆ¶ç»„ä»¶æ‰§è¡Œ <code>patch</code> è¿‡ç¨‹çš„æ—¶å€™ï¼Œé‚£è¿™ä¸ªæ—¶å€™çˆ¶ç»„ä»¶å·²ç»ç¼–è¯‘å®Œæˆäº†ã€‚å¹¶ä¸”å­ç»„ä»¶åœ¨ <code>init</code> è¿‡ç¨‹ä¸­ä¼šæ‰§è¡Œ <code>initRender</code> å‡½æ•°ï¼Œ<code>initRender</code> çš„æ—¶å€™è·å–åˆ° <code>vm.$slot</code>ï¼Œç›¸å…³ä»£ç åœ¨ <code>src/core/instance/render.js</code> ä¸­ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">initRender</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">vm</span><span class="token operator">:</span> Component</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token keyword">const</span> parentVnode <span class="token operator">=</span> vm<span class="token punctuation">.</span>$vnode <span class="token operator">=</span> options<span class="token punctuation">.</span>_parentVnode <span class="token comment">// the placeholder node in parent tree</span>
  <span class="token keyword">const</span> renderContext <span class="token operator">=</span> parentVnode <span class="token operator">&amp;&amp;</span> parentVnode<span class="token punctuation">.</span>context
  vm<span class="token punctuation">.</span>$slots <span class="token operator">=</span> <span class="token function">resolveSlots</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>_renderChildren<span class="token punctuation">,</span> renderContext<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>vm.$slots</code> æ˜¯é€šè¿‡æ‰§è¡Œ <code>resolveSlots(options._renderChildren, renderContext)</code> è¿”å›çš„ï¼Œå®ƒçš„å®šä¹‰åœ¨ <code>src/core/instance/render-helpers/resolve-slots.js</code> ä¸­ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * Runtime helper for resolving raw children VNodes into a slot object.
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">resolveSlots</span> <span class="token punctuation">(</span>
  <span class="token parameter"><span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token operator">?</span>Array<span class="token operator">&lt;</span>VNode<span class="token operator">&gt;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">context</span><span class="token operator">:</span> <span class="token operator">?</span>Component</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>key<span class="token operator">:</span> string<span class="token punctuation">]</span><span class="token operator">:</span> Array<span class="token operator">&lt;</span>VNode<span class="token operator">&gt;</span> <span class="token punctuation">}</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> slots <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>children<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> slots
  <span class="token punctuation">}</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> children<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> child <span class="token operator">=</span> children<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> child<span class="token punctuation">.</span>data
    <span class="token comment">// remove slot attribute if the node is resolved as a Vue slot node</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">.</span>attrs <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">.</span>attrs<span class="token punctuation">.</span>slot<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">delete</span> data<span class="token punctuation">.</span>attrs<span class="token punctuation">.</span>slot
    <span class="token punctuation">}</span>
    <span class="token comment">// named slots should only be respected if the vnode was rendered in the</span>
    <span class="token comment">// same context.</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>child<span class="token punctuation">.</span>context <span class="token operator">===</span> context <span class="token operator">||</span> child<span class="token punctuation">.</span>fnContext <span class="token operator">===</span> context<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
      data <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">.</span>slot <span class="token operator">!=</span> <span class="token keyword">null</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> name <span class="token operator">=</span> data<span class="token punctuation">.</span>slot
      <span class="token keyword">const</span> slot <span class="token operator">=</span> <span class="token punctuation">(</span>slots<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">(</span>slots<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>child<span class="token punctuation">.</span>tag <span class="token operator">===</span> <span class="token string">'template'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        slot<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>slot<span class="token punctuation">,</span> child<span class="token punctuation">.</span>children <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        slot<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token punctuation">(</span>slots<span class="token punctuation">.</span>default <span class="token operator">||</span> <span class="token punctuation">(</span>slots<span class="token punctuation">.</span>default <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ignore slots that contains only whitespace</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> name <span class="token keyword">in</span> slots<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>slots<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span>isWhitespace<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">delete</span> slots<span class="token punctuation">[</span>name<span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> slots
<span class="token punctuation">}</span>
</code></pre></div><p><code>resolveSlots</code> æ–¹æ³•æ¥æ”¶ 2 ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•° <code>chilren</code> å¯¹åº”çš„æ˜¯çˆ¶ <code>vnode</code> çš„ <code>children</code>ï¼Œåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­å°±æ˜¯ <code>&lt;app-layout&gt;</code> å’Œ <code>&lt;/app-layout&gt;</code> åŒ…è£¹çš„å†…å®¹ã€‚ç¬¬äºŒä¸ªå‚æ•° <code>context</code> æ˜¯çˆ¶ <code>vnode</code> çš„ä¸Šä¸‹æ–‡ï¼Œä¹Ÿå°±æ˜¯çˆ¶ç»„ä»¶çš„ <code>vm</code> å®ä¾‹ã€‚</p> <p><code>resolveSlots</code> å‡½æ•°çš„é€»è¾‘å°±æ˜¯éå† <code>chilren</code>ï¼Œæ‹¿åˆ°æ¯ä¸€ä¸ª <code>child</code> çš„ <code>data</code>ï¼Œç„¶åé€šè¿‡ <code>data.slot</code> è·å–åˆ°æ’æ§½åç§°ï¼Œè¿™ä¸ª <code>slot</code> å°±æ˜¯æˆ‘ä»¬ä¹‹å‰ç¼–è¯‘çˆ¶ç»„ä»¶åœ¨ <code>codegen</code> é˜¶æ®µè®¾ç½®çš„ <code>data.slot</code>ã€‚æ¥ç€ä»¥æ’æ§½åç§°ä¸º <code>key</code> æŠŠ <code>child</code> æ·»åŠ åˆ° <code>slots</code> ä¸­ï¼Œå¦‚æœ <code>data.slot</code> ä¸å­˜åœ¨ï¼Œåˆ™æ˜¯é»˜è®¤æ’æ§½çš„å†…å®¹ï¼Œåˆ™æŠŠå¯¹åº”çš„ <code>child</code> æ·»åŠ åˆ° <code>slots.defaults</code> ä¸­ã€‚è¿™æ ·å°±è·å–åˆ°æ•´ä¸ª <code>slots</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œ<code>key</code> æ˜¯æ’æ§½åç§°ï¼Œ<code>value</code> æ˜¯ä¸€ä¸ª <code>vnode</code> ç±»å‹çš„æ•°ç»„ï¼Œå› ä¸ºå®ƒå¯ä»¥æœ‰å¤šä¸ªåŒåæ’æ§½ã€‚</p> <p>è¿™æ ·æˆ‘ä»¬å°±æ‹¿åˆ°äº† <code>vm.$slots</code> äº†ï¼Œå›åˆ° <code>renderSlot</code> å‡½æ•°ï¼Œ<code>const slotNodes = this.$slots[name]</code>ï¼Œæˆ‘ä»¬ä¹Ÿå°±èƒ½æ ¹æ®æ’æ§½åç§°è·å–åˆ°å¯¹åº”çš„ <code>vnode</code> æ•°ç»„äº†ï¼Œè¿™ä¸ªæ•°ç»„é‡Œçš„ <code>vnode</code> éƒ½æ˜¯åœ¨çˆ¶ç»„ä»¶åˆ›å»ºçš„ï¼Œè¿™æ ·å°±å®ç°äº†åœ¨çˆ¶ç»„ä»¶æ›¿æ¢å­ç»„ä»¶æ’æ§½çš„å†…å®¹äº†ã€‚</p> <p>å¯¹åº”çš„ <code>slot</code> æ¸²æŸ“æˆ <code>vnodes</code>ï¼Œä½œä¸ºå½“å‰ç»„ä»¶æ¸²æŸ“ <code>vnode</code> çš„ <code>children</code>ï¼Œä¹‹åçš„æ¸²æŸ“è¿‡ç¨‹ä¹‹å‰åˆ†æè¿‡ï¼Œä¸å†èµ˜è¿°ã€‚</p> <p>æˆ‘ä»¬çŸ¥é“åœ¨æ™®é€šæ’æ§½ä¸­ï¼Œçˆ¶ç»„ä»¶åº”ç”¨åˆ°å­ç»„ä»¶æ’æ§½é‡Œçš„æ•°æ®éƒ½æ˜¯ç»‘å®šåˆ°çˆ¶ç»„ä»¶çš„ï¼Œå› ä¸ºå®ƒæ¸²æŸ“æˆ <code>vnode</code> çš„æ—¶æœºçš„ä¸Šä¸‹æ–‡æ˜¯çˆ¶ç»„ä»¶çš„å®ä¾‹ã€‚ä½†æ˜¯åœ¨ä¸€äº›å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬æƒ³é€šè¿‡å­ç»„ä»¶çš„ä¸€äº›æ•°æ®æ¥å†³å®šçˆ¶ç»„ä»¶å®ç°æ’æ§½çš„é€»è¾‘ï¼ŒVue æä¾›äº†å¦ä¸€ç§æ’æ§½â€”â€”ä½œç”¨åŸŸæ’æ§½ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥åˆ†æä¸€ä¸‹å®ƒçš„å®ç°åŸç†ã€‚</p> <h2 id="ä½œç”¨åŸŸæ’æ§½"><a href="#ä½œç”¨åŸŸæ’æ§½" class="header-anchor">#</a> ä½œç”¨åŸŸæ’æ§½</h2> <p>ä¸ºäº†æ›´åŠ ç›´è§‚ï¼Œæˆ‘ä»¬ä¹Ÿæ˜¯é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥åˆ†æä½œç”¨åŸŸæ’æ§½çš„å®ç°ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> Child <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'&lt;div class=&quot;child&quot;&gt;'</span> <span class="token operator">+</span>
  <span class="token string">'&lt;slot text=&quot;Hello &quot; :msg=&quot;msg&quot;&gt;&lt;/slot&gt;'</span> <span class="token operator">+</span>
  <span class="token string">'&lt;/div&gt;'</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">'Vue'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'&lt;div&gt;'</span> <span class="token operator">+</span>
  <span class="token string">'&lt;child&gt;'</span> <span class="token operator">+</span>
  <span class="token string">'&lt;template slot-scope=&quot;props&quot;&gt;'</span> <span class="token operator">+</span>
  <span class="token string">'&lt;p&gt;Hello from parent&lt;/p&gt;'</span> <span class="token operator">+</span>
  <span class="token string">'&lt;p&gt;{{ props.text + props.msg}}&lt;/p&gt;'</span> <span class="token operator">+</span>
  <span class="token string">'&lt;/template&gt;'</span> <span class="token operator">+</span>
  <span class="token string">'&lt;/child&gt;'</span> <span class="token operator">+</span>
  <span class="token string">'&lt;/div&gt;'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    Child
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>æœ€ç»ˆç”Ÿæˆçš„ DOM ç»“æ„å¦‚ä¸‹ï¼š</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>child<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Hello from parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Hello Vue<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å­ç»„ä»¶çš„ <code>slot</code> æ ‡ç­¾å¤šäº† <code>text</code> å±æ€§ï¼Œä»¥åŠ <code>:msg</code> å±æ€§ã€‚çˆ¶ç»„ä»¶å®ç°æ’æ§½çš„éƒ¨åˆ†å¤šäº†ä¸€ä¸ª <code>template</code> æ ‡ç­¾ï¼Œä»¥åŠ <code>scope-slot</code> å±æ€§ï¼Œå…¶å®åœ¨ Vue 2.5+ ç‰ˆæœ¬ï¼Œ<code>scoped-slot</code> å¯ä»¥ä½œç”¨åœ¨æ™®é€šå…ƒç´ ä¸Šã€‚è¿™äº›å°±æ˜¯ä½œç”¨åŸŸæ’æ§½å’Œæ™®é€šæ’æ§½åœ¨å†™æ³•ä¸Šçš„å·®åˆ«ã€‚</p> <p>åœ¨ç¼–è¯‘é˜¶æ®µï¼Œä»ç„¶æ˜¯å…ˆç¼–è¯‘çˆ¶ç»„ä»¶ï¼ŒåŒæ ·æ˜¯é€šè¿‡ <code>processSlot</code> å‡½æ•°å»å¤„ç† <code>scoped-slot</code>ï¼Œå®ƒçš„å®šä¹‰åœ¨åœ¨ <code>src/compiler/parser/index.js</code> ä¸­ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">processSlot</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token keyword">let</span> slotScope
  <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>tag <span class="token operator">===</span> <span class="token string">'template'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    slotScope <span class="token operator">=</span> <span class="token function">getAndRemoveAttr</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token string">'scope'</span><span class="token punctuation">)</span>
    <span class="token comment">/* istanbul ignore if */</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span> <span class="token operator">&amp;&amp;</span> slotScope<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">warn</span><span class="token punctuation">(</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">the &quot;scope&quot; attribute for scoped slots have been deprecated and </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">replaced by &quot;slot-scope&quot; since 2.5. The new &quot;slot-scope&quot; attribute </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">can also be used on plain elements in addition to &lt;template&gt; to </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">denote scoped slots.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        <span class="token boolean">true</span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    el<span class="token punctuation">.</span>slotScope <span class="token operator">=</span> slotScope <span class="token operator">||</span> <span class="token function">getAndRemoveAttr</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token string">'slot-scope'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>slotScope <span class="token operator">=</span> <span class="token function">getAndRemoveAttr</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token string">'slot-scope'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* istanbul ignore if */</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span> <span class="token operator">&amp;&amp;</span> el<span class="token punctuation">.</span>attrsMap<span class="token punctuation">[</span><span class="token string">'v-for'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">warn</span><span class="token punctuation">(</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Ambiguous combined usage of slot-scope and v-for on &lt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>el<span class="token punctuation">.</span>tag<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&gt; </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">(v-for takes higher priority). Use a wrapper &lt;template&gt; for the </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">scoped slot to make it clearer.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        <span class="token boolean">true</span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    el<span class="token punctuation">.</span>slotScope <span class="token operator">=</span> slotScope
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span> 
</code></pre></div><p>è¿™å—é€»è¾‘å¾ˆç®€å•ï¼Œè¯»å– <code>scoped-slot</code> å±æ€§å¹¶èµ‹å€¼ç»™å½“å‰ AST å…ƒç´ èŠ‚ç‚¹çš„ <code>slotScope</code> å±æ€§ï¼Œæ¥ä¸‹æ¥åœ¨æ„é€  AST æ ‘çš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œä»¥ä¸‹é€»è¾‘ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>elseif <span class="token operator">||</span> element<span class="token punctuation">.</span>else<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">processIfConditions</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> currentParent<span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>slotScope<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  currentParent<span class="token punctuation">.</span>plain <span class="token operator">=</span> <span class="token boolean">false</span>
  <span class="token keyword">const</span> name <span class="token operator">=</span> element<span class="token punctuation">.</span>slotTarget <span class="token operator">||</span> <span class="token string">'&quot;default&quot;'</span>
  <span class="token punctuation">;</span><span class="token punctuation">(</span>currentParent<span class="token punctuation">.</span>scopedSlots <span class="token operator">||</span> <span class="token punctuation">(</span>currentParent<span class="token punctuation">.</span>scopedSlots <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> element
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  currentParent<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span>
  element<span class="token punctuation">.</span>parent <span class="token operator">=</span> currentParent
<span class="token punctuation">}</span>
</code></pre></div><p>å¯ä»¥çœ‹åˆ°å¯¹äºæ‹¥æœ‰ <code>scopedSlot</code> å±æ€§çš„ AST å…ƒç´ èŠ‚ç‚¹è€Œè¨€ï¼Œæ˜¯ä¸ä¼šä½œä¸º <code>children</code> æ·»åŠ åˆ°å½“å‰ AST æ ‘ä¸­ï¼Œè€Œæ˜¯å­˜åˆ°çˆ¶ AST å…ƒç´ èŠ‚ç‚¹çš„ <code>scopedSlots</code> å±æ€§ä¸Šï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»¥æ’æ§½åç§° <code>name</code> ä¸º <code>key</code>ã€‚</p> <p>ç„¶ååœ¨ <code>genData</code> çš„è¿‡ç¨‹ï¼Œä¼šå¯¹ <code>scopedSlots</code> åšå¤„ç†ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>scopedSlots<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  data <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">genScopedSlots</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>scopedSlots<span class="token punctuation">,</span> state<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">genScopedSlots</span> <span class="token punctuation">(</span>
  <span class="token parameter"><span class="token literal-property property">slots</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>key<span class="token operator">:</span> string<span class="token punctuation">]</span><span class="token operator">:</span> ASTElement <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">state</span><span class="token operator">:</span> CodegenState</span>
<span class="token punctuation">)</span><span class="token operator">:</span> string <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">scopedSlots:_u([</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>
    Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>slots<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">genScopedSlot</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> slots<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> state<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span>
  <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">])</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">genScopedSlot</span> <span class="token punctuation">(</span>
  <span class="token parameter"><span class="token literal-property property">key</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
  <span class="token literal-property property">el</span><span class="token operator">:</span> ASTElement<span class="token punctuation">,</span>
  <span class="token literal-property property">state</span><span class="token operator">:</span> CodegenState</span>
<span class="token punctuation">)</span><span class="token operator">:</span> string <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>for <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>el<span class="token punctuation">.</span>forProcessed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">genForScopedSlot</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> el<span class="token punctuation">,</span> state<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> fn <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">function(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">String</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>slotScope<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">){</span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">return </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>el<span class="token punctuation">.</span>tag <span class="token operator">===</span> <span class="token string">'template'</span>
      <span class="token operator">?</span> el<span class="token punctuation">.</span>if
        <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>el<span class="token punctuation">.</span>if<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">?</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">genChildren</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> state<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">'undefined'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:undefined</span><span class="token template-punctuation string">`</span></span>
        <span class="token operator">:</span> <span class="token function">genChildren</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> state<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">'undefined'</span>
      <span class="token operator">:</span> <span class="token function">genElement</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> state<span class="token punctuation">)</span>
    <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">}</span><span class="token template-punctuation string">`</span></span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">{key:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,fn:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>fn<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">}</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>genScopedSlots</code> å°±æ˜¯å¯¹ <code>scopedSlots</code> å¯¹è±¡éå†ï¼Œæ‰§è¡Œ <code>genScopedSlot</code>ï¼Œå¹¶æŠŠç»“æœç”¨é€—å·æ‹¼æ¥ï¼Œè€Œ <code>genScopedSlot</code> æ˜¯å…ˆç”Ÿæˆä¸€æ®µå‡½æ•°ä»£ç ï¼Œå¹¶ä¸”å‡½æ•°çš„å‚æ•°å°±æ˜¯æˆ‘ä»¬çš„ <code>slotScope</code>ï¼Œä¹Ÿå°±æ˜¯å†™åœ¨æ ‡ç­¾å±æ€§ä¸Šçš„ <code>scoped-slot</code> å¯¹åº”çš„å€¼ï¼Œç„¶åå†è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œ<code>key</code> ä¸ºæ’æ§½åç§°ï¼Œ<code>fn</code> ä¸ºç”Ÿæˆçš„å‡½æ•°ä»£ç ã€‚</p> <p>å¯¹äºæˆ‘ä»¬è¿™ä¸ªä¾‹å­è€Œè¨€ï¼Œçˆ¶ç»„ä»¶æœ€ç»ˆç”Ÿæˆçš„ä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">with</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">_c</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token function">_c</span><span class="token punctuation">(</span><span class="token string">'child'</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span><span class="token literal-property property">scopedSlots</span><span class="token operator">:</span><span class="token function">_u</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span>
          <span class="token function-variable function">fn</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">[</span>
              <span class="token function">_c</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token function">_v</span><span class="token punctuation">(</span><span class="token string">&quot;Hello from parent&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token function">_c</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token function">_v</span><span class="token punctuation">(</span><span class="token function">_s</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>text <span class="token operator">+</span> props<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token punctuation">]</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¯ä»¥çœ‹åˆ°å®ƒå’Œæ™®é€šæ’æ§½çˆ¶ç»„ä»¶ç¼–è¯‘ç»“æœçš„ä¸€ä¸ªå¾ˆæ˜æ˜¾çš„åŒºåˆ«å°±æ˜¯æ²¡æœ‰ <code>children</code> äº†ï¼Œ<code>data</code> éƒ¨åˆ†å¤šäº†ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”æ‰§è¡Œäº† <code>_u</code> æ–¹æ³•ï¼Œåœ¨ç¼–è¯‘ç« èŠ‚æˆ‘ä»¬äº†è§£åˆ°ï¼Œ<code>_u</code> å‡½æ•°å¯¹çš„å°±æ˜¯ <code>resolveScopedSlots</code> æ–¹æ³•ï¼Œå®ƒçš„å®šä¹‰åœ¨ <code>src/core/instance/render-heplpers/resolve-slots.js</code> ä¸­ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">resolveScopedSlots</span> <span class="token punctuation">(</span>
  <span class="token literal-property property">fns</span><span class="token operator">:</span> ScopedSlotsData<span class="token punctuation">,</span> <span class="token comment">// see flow/vnode</span>
  res<span class="token operator">?</span><span class="token operator">:</span> Object
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>key<span class="token operator">:</span> string<span class="token punctuation">]</span><span class="token operator">:</span> Function <span class="token punctuation">}</span> <span class="token punctuation">{</span>
  res <span class="token operator">=</span> res <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> fns<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>fns<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">resolveScopedSlots</span><span class="token punctuation">(</span>fns<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      res<span class="token punctuation">[</span>fns<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> fns<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>fn
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> res
<span class="token punctuation">}</span>
</code></pre></div><p>å…¶ä¸­ï¼Œ<code>fns</code> æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ¯ä¸€ä¸ªæ•°ç»„å…ƒç´ éƒ½æœ‰ä¸€ä¸ª <code>key</code> å’Œä¸€ä¸ª <code>fn</code>ï¼Œ<code>key</code> å¯¹åº”çš„æ˜¯æ’æ§½çš„åç§°ï¼Œ<code>fn</code> å¯¹åº”ä¸€ä¸ªå‡½æ•°ã€‚æ•´ä¸ªé€»è¾‘å°±æ˜¯éå†è¿™ä¸ª <code>fns</code> æ•°ç»„ï¼Œç”Ÿæˆä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡çš„ <code>key</code> å°±æ˜¯æ’æ§½åç§°ï¼Œ<code>value</code> å°±æ˜¯å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°çš„æ‰§è¡Œæ—¶æœºç¨åæˆ‘ä»¬ä¼šä»‹ç»ã€‚</p> <p>æ¥ç€æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹å­ç»„ä»¶çš„ç¼–è¯‘ï¼Œå’Œæ™®é€šæ’æ§½çš„è¿‡ç¨‹åŸºæœ¬ç›¸åŒï¼Œå”¯ä¸€ä¸€ç‚¹åŒºåˆ«æ˜¯åœ¨ <code>genSlot</code> çš„æ—¶å€™ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">genSlot</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">el</span><span class="token operator">:</span> ASTElement<span class="token punctuation">,</span> <span class="token literal-property property">state</span><span class="token operator">:</span> CodegenState</span><span class="token punctuation">)</span><span class="token operator">:</span> string <span class="token punctuation">{</span>
  <span class="token keyword">const</span> slotName <span class="token operator">=</span> el<span class="token punctuation">.</span>slotName <span class="token operator">||</span> <span class="token string">'&quot;default&quot;'</span>
  <span class="token keyword">const</span> children <span class="token operator">=</span> <span class="token function">genChildren</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> state<span class="token punctuation">)</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">_t(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>slotName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>children <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>children<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token keyword">const</span> attrs <span class="token operator">=</span> el<span class="token punctuation">.</span>attrs <span class="token operator">&amp;&amp;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">{</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>el<span class="token punctuation">.</span>attrs<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">a</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">camelize</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>a<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">}</span><span class="token template-punctuation string">`</span></span>
  <span class="token keyword">const</span> bind <span class="token operator">=</span> el<span class="token punctuation">.</span>attrsMap<span class="token punctuation">[</span><span class="token string">'v-bind'</span><span class="token punctuation">]</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>attrs <span class="token operator">||</span> bind<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>children<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">,null</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>attrs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>attrs<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>bind<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>attrs <span class="token operator">?</span> <span class="token string">''</span> <span class="token operator">:</span> <span class="token string">',null'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>bind<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> res <span class="token operator">+</span> <span class="token string">')'</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å®ƒä¼šå¯¹ <code>attrs</code> å’Œ <code>v-bind</code> åšå¤„ç†ï¼Œå¯¹åº”åˆ°æˆ‘ä»¬çš„ä¾‹å­ï¼Œæœ€ç»ˆç”Ÿæˆçš„ä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">with</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">_c</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token literal-property property">staticClass</span><span class="token operator">:</span><span class="token string">&quot;child&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token function">_t</span><span class="token punctuation">(</span><span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span><span class="token literal-property property">text</span><span class="token operator">:</span><span class="token string">&quot;Hello &quot;</span><span class="token punctuation">,</span><span class="token literal-property property">msg</span><span class="token operator">:</span>msg<span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
</code></pre></div><p><code>_t</code> æ–¹æ³•æˆ‘ä»¬ä¹‹å‰ä»‹ç»è¿‡ï¼Œå¯¹åº”çš„æ˜¯ <code>renderSlot</code> æ–¹æ³•ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">renderSlot</span> <span class="token punctuation">(</span>
  <span class="token parameter"><span class="token literal-property property">name</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
  <span class="token literal-property property">fallback</span><span class="token operator">:</span> <span class="token operator">?</span>Array<span class="token operator">&lt;</span>VNode<span class="token operator">&gt;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token operator">?</span>Object<span class="token punctuation">,</span>
  <span class="token literal-property property">bindObject</span><span class="token operator">:</span> <span class="token operator">?</span>Object</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token operator">?</span>Array<span class="token operator">&lt;</span>VNode<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> scopedSlotFn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$scopedSlots<span class="token punctuation">[</span>name<span class="token punctuation">]</span>
  <span class="token keyword">let</span> nodes
  <span class="token keyword">if</span> <span class="token punctuation">(</span>scopedSlotFn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    props <span class="token operator">=</span> props <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>bindObject<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">isObject</span><span class="token punctuation">(</span>bindObject<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">warn</span><span class="token punctuation">(</span>
          <span class="token string">'slot v-bind without argument expects an Object'</span><span class="token punctuation">,</span>
          <span class="token keyword">this</span>
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      props <span class="token operator">=</span> <span class="token function">extend</span><span class="token punctuation">(</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> bindObject<span class="token punctuation">)</span><span class="token punctuation">,</span> props<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    nodes <span class="token operator">=</span> <span class="token function">scopedSlotFn</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">||</span> fallback
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> target <span class="token operator">=</span> props <span class="token operator">&amp;&amp;</span> props<span class="token punctuation">.</span>slot
  <span class="token keyword">if</span> <span class="token punctuation">(</span>target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$createElement</span><span class="token punctuation">(</span><span class="token string">'template'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">slot</span><span class="token operator">:</span> target <span class="token punctuation">}</span><span class="token punctuation">,</span> nodes<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> nodes
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æˆ‘ä»¬åªå…³æ³¨ä½œç”¨åŸŸæ’æ§½çš„é€»è¾‘ï¼Œé‚£ä¹ˆè¿™ä¸ª <code>this.$scopedSlots</code> åˆæ˜¯åœ¨ä»€ä¹ˆåœ°æ–¹å®šä¹‰çš„å‘¢ï¼ŒåŸæ¥åœ¨å­ç»„ä»¶çš„æ¸²æŸ“å‡½æ•°æ‰§è¡Œå‰ï¼Œåœ¨ <code>vm_render</code> æ–¹æ³•å†…ï¼Œæœ‰è¿™ä¹ˆä¸€æ®µé€»è¾‘ï¼Œå®šä¹‰åœ¨ <code>src/core/instance/render.js</code> ä¸­ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token keyword">if</span> <span class="token punctuation">(</span>_parentVnode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  vm<span class="token punctuation">.</span>$scopedSlots <span class="token operator">=</span> _parentVnode<span class="token punctuation">.</span>data<span class="token punctuation">.</span>scopedSlots <span class="token operator">||</span> emptyObject
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™ä¸ª <code>_parentVNode.data.scopedSlots</code> å¯¹åº”çš„å°±æ˜¯æˆ‘ä»¬åœ¨çˆ¶ç»„ä»¶é€šè¿‡æ‰§è¡Œ <code>resolveScopedSlots</code> è¿”å›çš„å¯¹è±¡ã€‚æ‰€ä»¥å›åˆ° <code>genSlot</code> å‡½æ•°ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æ’æ§½çš„åç§°æ‹¿åˆ°å¯¹åº”çš„ <code>scopedSlotFn</code>ï¼Œç„¶åæŠŠç›¸å…³çš„æ•°æ®æ‰©å±•åˆ° <code>props</code> ä¸Šï¼Œä½œä¸ºå‡½æ•°çš„å‚æ•°ä¼ å…¥ï¼ŒåŸæ¥ä¹‹å‰æˆ‘ä»¬æåˆ°çš„å‡½æ•°è¿™ä¸ªæ—¶å€™æ‰§è¡Œï¼Œç„¶åè¿”å›ç”Ÿæˆçš„ <code>vnodes</code>ï¼Œä¸ºåç»­æ¸²æŸ“èŠ‚ç‚¹ç”¨ã€‚</p> <p>åç»­æµç¨‹ä¹‹å‰å·²ä»‹ç»è¿‡ï¼Œä¸å†èµ˜è¿°ï¼Œé‚£ä¹ˆè‡³æ­¤ï¼Œä½œç”¨åŸŸæ’æ§½çš„å®ç°ä¹Ÿå°±åˆ†æå®Œæ¯•ã€‚</p> <h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="header-anchor">#</a> æ€»ç»“</h2> <p>é€šè¿‡è¿™ä¸€ç« çš„åˆ†æï¼Œæˆ‘ä»¬äº†è§£äº†æ™®é€šæ’æ§½å’Œä½œç”¨åŸŸæ’æ§½çš„å®ç°ã€‚å®ƒä»¬æœ‰ä¸€ä¸ªå¾ˆå¤§çš„å·®åˆ«æ˜¯æ•°æ®ä½œç”¨åŸŸï¼Œæ™®é€šæ’æ§½æ˜¯åœ¨çˆ¶ç»„ä»¶ç¼–è¯‘å’Œæ¸²æŸ“é˜¶æ®µç”Ÿæˆ <code>vnodes</code>ï¼Œæ‰€ä»¥æ•°æ®çš„ä½œç”¨åŸŸæ˜¯çˆ¶ç»„ä»¶å®ä¾‹ï¼Œå­ç»„ä»¶æ¸²æŸ“çš„æ—¶å€™ç›´æ¥æ‹¿åˆ°è¿™äº›æ¸²æŸ“å¥½çš„ <code>vnodes</code>ã€‚è€Œå¯¹äºä½œç”¨åŸŸæ’æ§½ï¼Œçˆ¶ç»„ä»¶åœ¨ç¼–è¯‘å’Œæ¸²æŸ“é˜¶æ®µå¹¶ä¸ä¼šç›´æ¥ç”Ÿæˆ <code>vnodes</code>ï¼Œè€Œæ˜¯åœ¨çˆ¶èŠ‚ç‚¹ <code>vnode</code> çš„ <code>data</code> ä¸­ä¿ç•™ä¸€ä¸ª <code>scopedSlots</code> å¯¹è±¡ï¼Œå­˜å‚¨ç€ä¸åŒåç§°çš„æ’æ§½ä»¥åŠå®ƒä»¬å¯¹åº”çš„æ¸²æŸ“å‡½æ•°ï¼Œåªæœ‰åœ¨ç¼–è¯‘å’Œæ¸²æŸ“å­ç»„ä»¶é˜¶æ®µæ‰ä¼šæ‰§è¡Œè¿™ä¸ªæ¸²æŸ“å‡½æ•°ç”Ÿæˆ <code>vnodes</code>ï¼Œç”±äºæ˜¯åœ¨å­ç»„ä»¶ç¯å¢ƒæ‰§è¡Œçš„ï¼Œæ‰€ä»¥å¯¹åº”çš„æ•°æ®ä½œç”¨åŸŸæ˜¯å­ç»„ä»¶å®ä¾‹ã€‚</p> <p>ç®€å•åœ°è¯´ï¼Œä¸¤ç§æ’æ§½çš„ç›®çš„éƒ½æ˜¯è®©å­ç»„ä»¶ <code>slot</code> å ä½ç¬¦ç”Ÿæˆçš„å†…å®¹ç”±çˆ¶ç»„ä»¶æ¥å†³å®šï¼Œä½†æ•°æ®çš„ä½œç”¨åŸŸä¼šæ ¹æ®å®ƒä»¬ <code>vnodes</code> æ¸²æŸ“æ—¶æœºä¸åŒè€Œä¸åŒã€‚</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/./vue2/extend/v-model.html" class="prev">
        v-model
      </a></span> <span class="next"><a href="/./vue2/extend/keep-alive.html">
        keep-alive
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="./assets/js/app.c50cae2e.js" defer></script><script src="./assets/js/4.08095b6d.js" defer></script><script src="./assets/js/52.e0cc02e1.js" defer></script>
  </body>
</html>
